import{b as w,r as l,f as _,j as e,L as o,a as k}from"./index-hRRtG8yy.js";import{A}from"./Layout-Js2Zl1pA.js";import{S as E}from"./Spinner-CLl_Ort6.js";import{A as S}from"./Alert-CoKbwLKe.js";import{B as j,R as c,C as t,a}from"./Row-bX7h-1jy.js";import{B as n}from"./NavBar-mvMqGCSV.js";function R(){const{user:B,isAdmin:N}=w(),[s,b]=l.useState(null),[g,u]=l.useState(!0),[f,y]=l.useState(null),[i,p]=l.useState("light"),m=A;l.useEffect(()=>{const d=document.documentElement.getAttribute("data-theme")||"light";p(d);const r=new MutationObserver(()=>{const x=document.documentElement.getAttribute("data-theme")||"light";p(x)});return r.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>r.disconnect()},[]),l.useEffect(()=>{(async()=>{try{u(!0);const r=await k.get("/auth/profile");b(r.data)}catch(r){y("Erreur lors du chargement du profil"),console.error("Erreur:",r)}finally{u(!1)}})()},[]),l.useEffect(()=>{_.replace()},[s]);const h=d=>d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Non renseigné",v=(d,r)=>d&&d.split(" ").length>1?d.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):r?r.substring(0,2).toUpperCase():"US";return g?e.jsx(m,{children:e.jsxs("div",{className:"text-center py-5",children:[e.jsx(E,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Chargement de votre profil..."})]})}):f||!s?e.jsxs(m,{children:[e.jsxs(S,{variant:"danger",className:"mb-4",children:[e.jsx("i",{"data-feather":"alert-circle",className:"me-2"}),f||"Profil introuvable"]}),e.jsx("div",{className:"d-flex gap-2",children:e.jsxs(j,{variant:"secondary",as:o,to:"/employe/dashboard",children:[e.jsx("i",{"data-feather":"arrow-left",className:"me-2"}),"Retour au dashboard"]})})]}):e.jsx(m,{children:e.jsxs("div",{className:"container-fluid py-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`h3 mb-1 ${i==="dark"?"text-light":"text-dark"}`,children:"Mon Profil"}),e.jsx("p",{className:`mb-0 ${i==="dark"?"text-light":"text-muted"}`,children:"Informations personnelles et compte"})]}),e.jsx("div",{className:"d-flex gap-2",children:e.jsxs(j,{variant:"outline-secondary",as:o,to:N?"/admin/dashboard":"/employee/dashboard",className:"d-flex align-items-center",children:[e.jsx("i",{"data-feather":"arrow-left",className:"me-2",style:{width:"16px",height:"16px"}}),"Retour"]})})]}),e.jsxs(c,{children:[e.jsxs(t,{lg:8,children:[e.jsxs(a,{className:`border-0 shadow-sm mb-4 ${i==="dark"?"bg-dark":"bg-white"}`,children:[e.jsx(a.Header,{className:"border-0",children:e.jsxs("h5",{className:"mb-0 d-flex align-items-center",children:[e.jsx("i",{"data-feather":"user",className:"me-2",style:{width:"20px",height:"20px"}}),"Informations personnelles"]})}),e.jsxs(a.Body,{children:[e.jsxs(c,{className:"align-items-center mb-4",children:[e.jsx(t,{md:3,className:"text-center",children:e.jsxs("div",{className:"position-relative d-inline-block",children:[e.jsx("div",{className:"rounded-circle bg-primary bg-opacity-10 d-flex align-items-center justify-content-center border",style:{width:"120px",height:"120px"},children:e.jsx("span",{className:"text-primary fw-bold fs-4",children:v(s.name||s.username,s.email)})}),e.jsx(n,{bg:s.is_admin?"success":"info",className:"position-absolute bottom-0 end-0 rounded-circle p-2",style:{transform:"translate(25%, 25%)"},children:e.jsx("i",{"data-feather":s.is_admin?"shield":"user",style:{width:"12px",height:"12px"}})})]})}),e.jsxs(t,{md:9,children:[e.jsx("h4",{className:"mb-2",children:s.name||s.username}),e.jsxs("p",{className:"text-muted mb-2",children:[e.jsx("i",{"data-feather":"mail",className:"me-2",style:{width:"16px",height:"16px"}}),s.email]}),s.phone&&e.jsxs("p",{className:"text-muted mb-2",children:[e.jsx("i",{"data-feather":"phone",className:"me-2",style:{width:"16px",height:"16px"}}),s.phone]}),e.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-2",children:[e.jsxs(n,{bg:s.is_admin?"success":"primary",children:[e.jsx("i",{"data-feather":s.is_admin?"shield":"user",className:"me-1",style:{width:"12px",height:"12px"}}),s.is_admin?"Administrateur":"Utilisateur"]}),e.jsxs(n,{bg:s.is_verified?"success":"secondary",children:[e.jsx("i",{"data-feather":s.is_verified?"check-circle":"x-circle",className:"me-1",style:{width:"12px",height:"12px"}}),s.is_verified?"Vérifié":"Non vérifié"]}),e.jsx(n,{bg:s.is_active?"success":"danger",children:s.is_active?"Actif":"Inactif"})]})]})]}),e.jsx("hr",{className:"my-4"}),e.jsxs(c,{children:[e.jsx(t,{md:6,className:"mb-3",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{className:"text-muted",children:"Nom d'utilisateur :"}),e.jsx("span",{className:"fw-medium",children:s.username})]})}),e.jsx(t,{md:6,className:"mb-3",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{className:"text-muted",children:"Email :"}),e.jsx("span",{className:"fw-medium",children:s.email})]})}),s.first_name&&e.jsx(t,{md:6,className:"mb-3",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{className:"text-muted",children:"Prénom :"}),e.jsx("span",{className:"fw-medium",children:s.first_name})]})}),s.last_name&&e.jsx(t,{md:6,className:"mb-3",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{className:"text-muted",children:"Nom :"}),e.jsx("span",{className:"fw-medium",children:s.last_name})]})}),s.phone&&e.jsx(t,{md:6,className:"mb-3",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{className:"text-muted",children:"Téléphone :"}),e.jsx("span",{className:"fw-medium",children:s.phone})]})}),e.jsx(t,{md:6,className:"mb-3",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{className:"text-muted",children:"Inscrit depuis :"}),e.jsx("span",{className:"fw-medium",children:h(s.date_joined)})]})}),e.jsx(t,{md:6,className:"mb-3",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{className:"text-muted",children:"Dernière connexion :"}),e.jsx("span",{className:"fw-medium",children:s.last_login?h(s.last_login):"Jamais connecté"})]})})]})]})]}),e.jsxs(a,{className:`border-0 shadow-sm ${i==="dark"?"bg-dark":"bg-white"}`,children:[e.jsx(a.Header,{className:"border-0",children:e.jsxs("h5",{className:"mb-0 d-flex align-items-center",children:[e.jsx("i",{"data-feather":"bar-chart",className:"me-2",style:{width:"20px",height:"20px"}}),"Mes statistiques"]})}),e.jsx(a.Body,{children:e.jsxs(c,{className:"text-center",children:[e.jsx(t,{md:4,children:e.jsxs("div",{className:"border-end border-secondary",children:[e.jsx("div",{className:`h4 mb-1 ${i==="dark"?"text-light":"text-dark"}`,children:s.total_tasks||0}),e.jsx("small",{className:i==="dark"?"text-light":"text-muted",children:"Tâches totales"})]})}),e.jsx(t,{md:4,children:e.jsxs("div",{className:"border-end border-secondary",children:[e.jsx("div",{className:"h4 mb-1 text-success",children:s.completed_tasks||0}),e.jsx("small",{className:i==="dark"?"text-light":"text-muted",children:"Tâches terminées"})]})}),e.jsxs(t,{md:4,children:[e.jsx("div",{className:`h4 mb-1 ${i==="dark"?"text-light":"text-dark"}`,children:s.pending_tasks||0}),e.jsx("small",{className:i==="dark"?"text-light":"text-muted",children:"Tâches en cours"})]})]})})]})]}),e.jsxs(t,{lg:4,children:[e.jsxs(a,{className:`border-0 shadow-sm mb-4 ${i==="dark"?"bg-dark":"bg-white"}`,children:[e.jsx(a.Header,{className:"border-0",children:e.jsxs("h5",{className:"mb-0 d-flex align-items-center",children:[e.jsx("i",{"data-feather":"zap",className:"me-2",style:{width:"20px",height:"20px"}}),"Actions rapides"]})}),e.jsx(a.Body,{children:e.jsx("div",{className:"d-grid gap-2",children:e.jsxs(j,{variant:"outline-info",as:o,to:"/employee/tasks",children:[e.jsx("i",{"data-feather":"list",className:"me-2",style:{width:"16px",height:"16px"}}),"Mes tâches"]})})})]}),e.jsxs(a,{className:`border-0 shadow-sm mb-4 ${i==="dark"?"bg-dark":"bg-white"}`,children:[e.jsx(a.Header,{className:"border-0",children:e.jsxs("h5",{className:"mb-0 d-flex align-items-center",children:[e.jsx("i",{"data-feather":"shield",className:"me-2 text-success",style:{width:"20px",height:"20px"}}),"Statut du compte"]})}),e.jsxs(a.Body,{children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("div",{className:s.is_admin?"text-success mb-2":"text-primary mb-2",children:e.jsx("i",{"data-feather":s.is_admin?"shield":"user",style:{width:"32px",height:"32px"}})}),e.jsx("h6",{className:"mb-0",children:"Type de compte"}),e.jsx("h4",{className:s.is_admin?"text-success mb-0":"text-primary mb-0",children:s.is_admin?"Administrateur":"Utilisateur"})]}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"small",children:[e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{className:"text-muted",children:"Vérification :"}),e.jsx(n,{bg:s.is_verified?"success":"secondary",children:s.is_verified?"Vérifié":"En attente"})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{className:"text-muted",children:"Activité :"}),e.jsx(n,{bg:s.is_active?"success":"danger",children:s.is_active?"Actif":"Inactif"})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{className:"text-muted",children:"Membre depuis :"}),e.jsx("span",{children:new Date(s.date_joined).toLocaleDateString("fr-FR")})]})]})]})]}),e.jsxs(a,{className:`border-0 shadow-sm ${i==="dark"?"bg-dark":"bg-white"}`,children:[e.jsx(a.Header,{className:"border-0",children:e.jsxs("h5",{className:"mb-0 d-flex align-items-center",children:[e.jsx("i",{"data-feather":"info",className:"me-2 text-secondary",style:{width:"20px",height:"20px"}}),"Informations système"]})}),e.jsx(a.Body,{children:e.jsxs("div",{className:"small",children:[e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsx("i",{"data-feather":"hash",className:"text-secondary me-2 mt-1",style:{width:"16px",height:"16px"}}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:"ID Utilisateur"}),e.jsx("div",{className:"text-muted",children:s.id})]})]}),e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsx("i",{"data-feather":"calendar",className:"text-secondary me-2 mt-1",style:{width:"16px",height:"16px"}}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:"Dernière mise à jour"}),e.jsx("div",{className:"text-muted",children:h(s.updated_at)})]})]})]})})]})]})]})]})})}export{R as default};
