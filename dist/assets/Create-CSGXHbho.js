import{u as C,r as i,f as E,j as e,L as N,a as S}from"./index-hRRtG8yy.js";import{A}from"./Layout-DZHbYMkx.js";import{B as j,R as u,C as l,a as r}from"./Row-bX7h-1jy.js";import{A as L}from"./Alert-CoKbwLKe.js";import{F as t}from"./Form-Dsmz1YOZ.js";import{S as F}from"./Spinner-CLl_Ort6.js";import"./NavBar-mvMqGCSV.js";import"./ElementChildren-NDIL728O.js";function G(){const y=C(),[m,g]=i.useState(!1),[b,f]=i.useState(null),[n,o]=i.useState({}),[a,v]=i.useState("light"),[d,w]=i.useState({title:"",description:"",status:"active"});i.useEffect(()=>{const c=document.documentElement.getAttribute("data-theme")||"light";v(c);const s=new MutationObserver(()=>{const x=document.documentElement.getAttribute("data-theme")||"light";v(x)});return s.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>s.disconnect()},[]),i.useEffect(()=>{E.replace()},[]);const h=c=>{const{name:s,value:x}=c.target;w(p=>({...p,[s]:x})),n[s]&&o(p=>({...p,[s]:null}))},k=async c=>{if(c.preventDefault(),!d.title.trim()){o({title:["Le titre est obligatoire"]});return}try{g(!0),f(null),o({}),(await S.post("/tasks/projects/",d)).data&&y("/admin/projects",{state:{message:"Projet cr√©√© avec succ√®s ‚úÖ",type:"success"}})}catch(s){console.error("‚ùå Erreur cr√©ation projet:",s),s.response?.data?.errors?o(s.response.data.errors):f(s.response?.data?.message||"Erreur lors de la cr√©ation du projet")}finally{g(!1)}};return e.jsx(A,{children:e.jsxs("div",{className:"container-fluid py-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`h3 mb-1 ${a==="dark"?"text-light":"text-dark"}`,children:"Cr√©er un nouveau projet"}),e.jsx("p",{className:`mb-0 ${a==="dark"?"text-light":"text-muted"}`,children:"Cr√©ation d'un nouveau projet pour organiser les t√¢ches"})]}),e.jsxs(j,{variant:"outline-secondary",as:N,to:"/admin/projects",className:"d-flex align-items-center",children:[e.jsx("i",{"data-feather":"arrow-left",className:"me-2",style:{width:"16px",height:"16px"}}),"Retour"]})]}),b&&e.jsxs(L,{variant:"danger",className:"mb-4",children:[e.jsx("i",{"data-feather":"alert-circle",className:"me-2"}),e.jsx("strong",{children:"Erreur:"})," ",b]}),e.jsx(t,{onSubmit:k,children:e.jsxs(u,{children:[e.jsx(l,{lg:8,className:"mb-4",children:e.jsxs(r,{className:`border-0 shadow-sm ${a==="dark"?"bg-dark":"bg-white"}`,children:[e.jsx(r.Header,{className:"border-0",children:e.jsxs("h5",{className:"mb-0 d-flex align-items-center",children:[e.jsx("i",{"data-feather":"folder-plus",className:"me-2",style:{width:"20px",height:"20px"}}),"Informations du projet"]})}),e.jsxs(r.Body,{children:[e.jsxs(u,{children:[e.jsx(l,{md:12,className:"mb-3",children:e.jsxs(t.Group,{children:[e.jsxs(t.Label,{children:[e.jsx("i",{"data-feather":"type",className:"me-2",style:{width:"16px",height:"16px"}}),"Titre du projet *"]}),e.jsx(t.Control,{type:"text",name:"title",value:d.title,onChange:h,placeholder:"Ex: D√©veloppement Application Mobile",isInvalid:!!n.title,className:a==="dark"?"bg-dark text-light border-secondary":"",required:!0}),e.jsx(t.Control.Feedback,{type:"invalid",children:n.title?.[0]})]})}),e.jsx(l,{md:12,className:"mb-3",children:e.jsxs(t.Group,{children:[e.jsxs(t.Label,{children:[e.jsx("i",{"data-feather":"file-text",className:"me-2",style:{width:"16px",height:"16px"}}),"Description"]}),e.jsx(t.Control,{as:"textarea",rows:4,name:"description",value:d.description,onChange:h,placeholder:"D√©crivez les objectifs et le contexte du projet...",isInvalid:!!n.description,className:a==="dark"?"bg-dark text-light border-secondary":""}),e.jsx(t.Control.Feedback,{type:"invalid",children:n.description?.[0]})]})}),e.jsx(l,{md:6,className:"mb-3",children:e.jsxs(t.Group,{children:[e.jsxs(t.Label,{children:[e.jsx("i",{"data-feather":"activity",className:"me-2",style:{width:"16px",height:"16px"}}),"Statut initial"]}),e.jsxs(t.Select,{name:"status",value:d.status,onChange:h,className:a==="dark"?"bg-dark text-light border-secondary":"",children:[e.jsx("option",{value:"active",children:"üü¢ Actif"}),e.jsx("option",{value:"on_hold",children:"üü° En pause"}),e.jsx("option",{value:"archived",children:"‚ö´ Archiv√©"})]})]})})]}),e.jsx("hr",{className:"my-4"}),e.jsx(u,{children:e.jsx(l,{md:12,children:e.jsxs("div",{className:"d-flex justify-content-end",children:[e.jsx(j,{variant:"outline-secondary",as:N,to:"/admin/projects",className:"me-2",disabled:m,children:"Annuler"}),e.jsx(j,{variant:"success",type:"submit",disabled:m,className:"d-flex align-items-center",children:m?e.jsxs(e.Fragment,{children:[e.jsx(F,{animation:"border",size:"sm",className:"me-2"}),"Cr√©ation..."]}):e.jsx(e.Fragment,{children:"Cr√©er le projet"})})]})})})]})]})}),e.jsxs(l,{lg:4,children:[e.jsxs(r,{className:`border-0 shadow-sm mb-4 ${a==="dark"?"bg-dark":"bg-white"}`,children:[e.jsx(r.Header,{className:`border-0 ${a==="dark"?"bg-dark":"bg-white"}`,children:e.jsxs("h5",{className:"mb-0 d-flex align-items-center",children:[e.jsx("i",{"data-feather":"info",className:"me-2 text-primary",style:{width:"20px",height:"20px"}}),"√Ä propos des projets"]})}),e.jsx(r.Body,{children:e.jsxs("div",{className:"small",children:[e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsx("i",{"data-feather":"folder",className:"text-success me-2 mt-1",style:{width:"14px",height:"14px"}}),e.jsx("span",{children:"Les projets permettent d'organiser les t√¢ches par contexte"})]}),e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsx("i",{"data-feather":"users",className:"text-info me-2 mt-1",style:{width:"14px",height:"14px"}}),e.jsx("span",{children:"Plusieurs utilisateurs peuvent avoir des t√¢ches dans un m√™me projet"})]}),e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsx("i",{"data-feather":"bar-chart",className:"text-warning me-2 mt-1",style:{width:"14px",height:"14px"}}),e.jsx("span",{children:"Suivez la progression globale de chaque projet"})]}),e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("i",{"data-feather":"settings",className:"text-secondary me-2 mt-1",style:{width:"14px",height:"14px"}}),e.jsx("span",{children:"Modifiez le statut selon l'avancement du projet"})]})]})})]}),e.jsxs(r,{className:`border-0 shadow-sm ${a==="dark"?"bg-dark":"bg-white"}`,children:[e.jsx(r.Header,{className:`border-0 ${a==="dark"?"bg-dark":"bg-white"}`,children:e.jsxs("h5",{className:"mb-0 d-flex align-items-center",children:[e.jsx("i",{"data-feather":"help-circle",className:"me-2 text-info",style:{width:"20px",height:"20px"}}),"Statuts des projets"]})}),e.jsx(r.Body,{children:e.jsxs("div",{className:"small",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("span",{className:"badge bg-success me-2",children:"Actif"}),e.jsx("span",{children:"Projet en cours de d√©veloppement"})]}),e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("span",{className:"badge bg-warning me-2",children:"En pause"}),e.jsx("span",{children:"Projet temporairement suspendu"})]}),e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("span",{className:"badge bg-primary me-2",children:"Termin√©"}),e.jsx("span",{children:"Projet achev√© avec succ√®s"})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"badge bg-secondary me-2",children:"Archiv√©"}),e.jsx("span",{children:"Projet conserv√© pour r√©f√©rence"})]})]})})]})]})]})})]})})}export{G as default};
