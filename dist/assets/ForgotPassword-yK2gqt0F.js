import{r as i,u as F,f as z,j as e,L as C,a as A}from"./index-K0TI1Cn5.js";import{C as L}from"./Container-Jb0DCQyA.js";import{R as j,C as l,a as o,B as N}from"./Row-DpO6zsT4.js";import{A as y}from"./Alert-JqR1u8An.js";import{F as d}from"./Form-CAmGkuOD.js";import{S as R}from"./Spinner-Br6_VxcD.js";import"./ElementChildren-DHcghUFE.js";const U=()=>{const[h,w]=i.useState({email:""}),[x,u]=i.useState(null),[n,g]=i.useState({}),[p,b]=i.useState(!1),[c,k]=i.useState(null),[f,v]=i.useState(null);F();const[t,m]=i.useState(localStorage.getItem("theme")||"light");i.useEffect(()=>{const s=document.documentElement.getAttribute("data-theme")||"light";m(s);const a=new MutationObserver(()=>{const r=document.documentElement.getAttribute("data-theme")||"light";m(r)});return a.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>a.disconnect()},[]),i.useEffect(()=>{z.replace()},[t,x,p,c]);const $=s=>{w({...h,[s.target.name]:s.target.value}),g({...n,[s.target.name]:null}),u(null)},S=async s=>{s.preventDefault(),u(null),g({}),b(!0);try{const a=await A.post("/forgot-password",h);k(a.data.message||"Un email de réinitialisation a été envoyé à votre adresse email. Veuillez vérifier votre boîte de réception.")}catch(a){const r=a.response;r?.status===422&&r.data?.errors?g(r.data.errors):u(r?.data?.message||"Une erreur s'est produite lors de l'envoi")}finally{b(!1)}},E=()=>{const s=document.documentElement,a=s.getAttribute("data-theme")==="dark"?"light":"dark";s.setAttribute("data-theme",a),localStorage.setItem("theme",a),m(a)};return i.useEffect(()=>{const s=localStorage.getItem("theme");s&&(document.documentElement.setAttribute("data-theme",s),m(s))},[]),e.jsx("div",{className:`min-vh-100 d-flex align-items-center py-4 ${t==="dark"?"bg-dark":"bg-light"}`,style:{background:t==="dark"?"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)":"linear-gradient(135deg, #e3f2fd 0%, #f8f9fa 50%, #e8f5e8 100%)"},children:e.jsx(L,{children:e.jsx(j,{className:"justify-content-center",children:e.jsxs(l,{xl:5,lg:6,md:8,sm:10,children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("h1",{className:`h3 fw-bold mb-2 ${t==="dark"?"text-light":"text-dark"}`,children:[e.jsx("i",{"data-feather":"book-open",className:"text-primary me-2",style:{width:"24px",height:"24px"}}),"Récupération de compte"]}),e.jsx("p",{className:`mb-0 ${t==="dark"?"text-light":"text-muted"}`,children:"Réinitialisez votre mot de passe pour accéder à vos cours"}),e.jsx("div",{className:"d-flex justify-content-center align-items-center mt-2",children:e.jsxs("div",{className:"badge bg-warning bg-opacity-10 text-warning px-3 py-1 rounded-pill",children:[e.jsx("i",{"data-feather":"key",className:"me-1",style:{width:"14px",height:"14px"}}),"Récupération sécurisée"]})})]}),e.jsxs(o,{className:`shadow-lg border-0 overflow-hidden ${t==="dark"?"bg-dark":"bg-white"}`,children:[e.jsx("div",{className:"bg-warning",style:{height:"4px"}}),e.jsx(o.Header,{className:`text-center py-4 border-0 ${t==="dark"?"bg-dark":"bg-white"}`,children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`mb-1 fw-bold ${t==="dark"?"text-light":"text-dark"}`,children:"Mot de passe oublié"}),e.jsx("small",{className:t==="dark"?"text-light":"text-muted",children:"Saisissez votre email pour recevoir un lien de réinitialisation"})]}),e.jsx(N,{variant:t==="dark"?"outline-light":"outline-secondary",size:"sm",onClick:E,className:"rounded-circle p-2",style:{width:"40px",height:"40px"},children:e.jsx("i",{"data-feather":t==="dark"?"sun":"moon",style:{width:"16px",height:"16px"}})})]})}),e.jsxs(o.Body,{className:`p-4 ${t==="dark"?"bg-dark":"bg-white"}`,children:[x&&e.jsxs(y,{variant:"danger",className:"d-flex align-items-start mb-4",children:[e.jsx("i",{"data-feather":"alert-circle",className:"text-danger me-2 mt-1",style:{width:"18px",height:"18px"}}),e.jsxs("div",{children:[e.jsx("strong",{children:"Erreur de récupération"}),e.jsx("div",{className:"small mt-1",children:x})]})]}),c&&e.jsxs(y,{variant:"success",className:"d-flex align-items-start mb-4",children:[e.jsx("i",{"data-feather":"check-circle",className:"text-success me-2 mt-1",style:{width:"18px",height:"18px"}}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email envoyé !"}),e.jsx("div",{className:"small mt-1",children:c})]})]}),!c&&e.jsxs(d,{onSubmit:S,className:"needs-validation",noValidate:!0,children:[e.jsx("div",{className:"mb-4 p-3 rounded-3 bg-info bg-opacity-10",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("i",{"data-feather":"info",className:"text-info me-2 mt-1",style:{width:"16px",height:"16px"}}),e.jsxs("div",{children:[e.jsx("small",{className:"fw-semibold text-info",children:"Comment ça fonctionne :"}),e.jsxs("ul",{className:`small mb-0 mt-1 ${t==="dark"?"text-light":"text-muted"}`,children:[e.jsx("li",{children:"Saisissez l'adresse email de votre compte"}),e.jsx("li",{children:'Cliquez sur "Envoyer le lien"'}),e.jsx("li",{children:"Consultez votre boîte email"}),e.jsx("li",{children:"Suivez le lien pour créer un nouveau mot de passe"})]})]})]})}),e.jsxs(d.Group,{className:"mb-4",children:[e.jsxs(d.Label,{className:`fw-semibold ${t==="dark"?"text-light":"text-dark"}`,children:[e.jsx("i",{"data-feather":"mail",className:"me-2",style:{width:"16px",height:"16px"}}),"Adresse email du compte"]}),e.jsxs("div",{className:"position-relative",children:[e.jsx(d.Control,{type:"email",name:"email",placeholder:"votre.email@domaine.com",value:h.email,onChange:$,onFocus:()=>v("email"),onBlur:()=>v(null),isInvalid:!!n.email,className:`py-3 ps-5 ${t==="dark"?"bg-dark text-light border-secondary":"bg-light"} ${f==="email"?"border-primary shadow-sm":""}`,required:!0}),e.jsx("div",{className:"position-absolute top-50 start-0 translate-middle-y ps-3",children:e.jsx("i",{"data-feather":"at-sign",className:`${f==="email"?"text-primary":t==="dark"?"text-light":"text-muted"}`,style:{width:"18px",height:"18px"}})})]}),n.email&&e.jsxs(d.Control.Feedback,{type:"invalid",className:"d-block",children:[e.jsx("i",{"data-feather":"x-circle",className:"me-1",style:{width:"14px",height:"14px"}}),n.email]})]}),e.jsx(N,{type:"submit",variant:"warning",disabled:p,className:"w-100 py-3 fw-semibold text-dark border-0 position-relative",style:{background:"linear-gradient(135deg, #ffc107 0%, #ffb300 100%)",boxShadow:"0 4px 15px rgba(255, 193, 7, 0.3)"},children:p?e.jsxs(e.Fragment,{children:[e.jsx(R,{animation:"border",size:"sm",className:"me-2"}),"Envoi en cours..."]}):e.jsx(e.Fragment,{children:"Envoyer le lien de réinitialisation"})})]}),e.jsxs("div",{className:"text-center my-4",children:[e.jsx("hr",{className:t==="dark"?"border-secondary":""}),e.jsx("span",{className:`px-3 small ${t==="dark"?"bg-dark text-light":"bg-white text-muted"}`,children:"Vous vous souvenez de votre mot de passe ?"})]}),e.jsx("div",{className:"text-center",children:e.jsxs(C,{to:"/login",className:"btn btn-outline-primary w-100 py-3 fw-semibold",children:[e.jsx("i",{"data-feather":"arrow-left",className:"me-2",style:{width:"18px",height:"18px"}}),"Retour à la connexion"]})})]}),e.jsx(o.Footer,{className:`text-center py-3 border-0 ${t==="dark"?"bg-dark":"bg-light"}`,children:e.jsxs(j,{className:"g-2",children:[e.jsx(l,{children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("i",{"data-feather":"shield",className:"text-success me-2",style:{width:"16px",height:"16px"}}),e.jsx("small",{className:`fw-semibold ${t==="dark"?"text-light":"text-muted"}`,children:"Processus sécurisé"})]})}),e.jsx(l,{children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("i",{"data-feather":"clock",className:"text-info me-2",style:{width:"16px",height:"16px"}}),e.jsx("small",{className:`fw-semibold ${t==="dark"?"text-light":"text-muted"}`,children:"Lien valide 1 heure"})]})})]})})]}),e.jsx("div",{className:`text-center mt-4 ${t==="dark"?"text-light":"text-muted"}`,children:e.jsxs("small",{children:[e.jsx("i",{"data-feather":"info",className:"me-1",style:{width:"12px",height:"12px"}}),"Si vous ne recevez pas l'email, vérifiez votre dossier spam ou contactez le support."]})}),e.jsxs(j,{className:"mt-4 g-3",children:[e.jsx(l,{md:6,children:e.jsxs("div",{className:"text-center p-3 rounded-3 h-100 bg-success bg-opacity-10",children:[e.jsx("i",{"data-feather":"shield",className:"text-success mb-2",style:{width:"32px",height:"32px"}}),e.jsx("div",{className:"small fw-semibold text-success mb-1",children:"Sécurité renforcée"}),e.jsx("div",{className:`small ${t==="dark"?"text-light":"text-muted"}`,children:"Lien temporaire et chiffré"})]})}),e.jsx(l,{md:6,children:e.jsxs("div",{className:"text-center p-3 rounded-3 h-100 bg-warning bg-opacity-10",children:[e.jsx("i",{"data-feather":"clock",className:"text-warning mb-2",style:{width:"32px",height:"32px"}}),e.jsx("div",{className:"small fw-semibold text-warning mb-1",children:"Expiration rapide"}),e.jsx("div",{className:`small ${t==="dark"?"text-light":"text-muted"}`,children:"Le lien expire après 1 heure"})]})})]})]})})})})};export{U as default};
