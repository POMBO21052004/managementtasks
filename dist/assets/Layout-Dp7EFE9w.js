import{c as N,r as i,j as e,L as y,b as E,u as w,f as v}from"./index-K0TI1Cn5.js";import{N as f,B as k,D as u}from"./NavBar-BemxVd0Z.js";import{B as j}from"./Row-DpO6zsT4.js";function T({user:p,collapsed:m}){const r=N(),[x,s]=i.useState("light");i.useEffect(()=>{const d=document.documentElement.getAttribute("data-theme")||"light";s(d);const c=new MutationObserver(()=>{const l=document.documentElement.getAttribute("data-theme")||"light";s(l)});return c.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>c.disconnect()},[]);const o=[{title:"Tableau de bord",items:[{label:"Dashboard",icon:"grid",path:"/employe/dashboard"}]},{title:"Gestion des projets",items:[{label:"Mes Projets",icon:"folder",path:"/employee/projects"}]},{title:"Gestion des tâches",items:[{label:"Mes Tâches",icon:"check-square",path:"/employee/tasks"}]}];return e.jsxs("aside",{className:`sidebar ${m?"collapsed":""}  ${x==="dark"?"bg-dark text-light":"bg-white text-dark"}`,children:[e.jsx("div",{className:"sidebar-header",children:e.jsxs("div",{className:"sidebar-logo",children:[e.jsx("div",{className:"sidebar-logo-icon",children:e.jsx("span",{children:"WS"})}),e.jsxs("div",{className:"sidebar-logo-text",children:[e.jsx("h6",{className:"sidebar-logo-title",children:"Task Manager"}),e.jsx("p",{className:"sidebar-logo-subtitle",children:"Espace Employé"})]})]})}),e.jsx("nav",{className:"sidebar-nav",children:o.map((d,c)=>e.jsxs("div",{className:"sidebar-nav-section",children:[e.jsx("h6",{className:"sidebar-nav-section-title",children:d.title}),e.jsx("ul",{className:"list-unstyled mb-0",children:d.items.map((l,h)=>e.jsx("li",{className:"sidebar-nav-item",children:e.jsxs(y,{to:l.path,className:`sidebar-nav-link ${r.pathname.startsWith(l.path)?"active":""}`,children:[e.jsx("i",{"data-feather":l.icon,className:"sidebar-nav-icon"}),e.jsx("span",{className:"sidebar-nav-text",children:l.label}),l.badge&&e.jsx("span",{className:"sidebar-nav-badge",children:l.badge})]})},h))})]},c))})]})}function S({toggleSidebar:p}){const{logout:m,user:r}=E(),x=w(),[s,o]=i.useState("light");i.useEffect(()=>{const t=document.documentElement.getAttribute("data-theme")||"light";o(t);const n=new MutationObserver(()=>{const a=document.documentElement.getAttribute("data-theme")||"light";o(a)});return n.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>n.disconnect()},[]);const d=()=>{const t=document.documentElement,n=t.getAttribute("data-theme")==="dark"?"light":"dark";t.setAttribute("data-theme",n),localStorage.setItem("theme",n),o(n)},c=()=>{m(),x("/")},l=t=>t?t.split(" ").map(n=>n[0]).join("").toUpperCase().slice(0,2):"E",h=(t,n=15)=>t.length>n?t.slice(0,n-3)+"...":t;i.useEffect(()=>{v.replace()},[s]);const g=t=>{t.preventDefault(),t.stopPropagation(),typeof p=="function"&&p()};return e.jsxs(f,{className:"navbar fixed-top",expand:!1,children:[e.jsxs("div",{className:"navbar-left",children:[e.jsx(j,{variant:"link",onClick:g,className:"toggle-btn me-3",title:"Toggle Sidebar",style:{display:"flex !important",visibility:"visible !important",opacity:"1 !important",position:"relative",zIndex:1031,border:"none",background:"transparent",padding:"8px 12px",borderRadius:"10px",minWidth:"44px",minHeight:"44px",alignItems:"center",justifyContent:"center"},children:e.jsx("i",{"data-feather":"menu",style:{width:"20px",height:"20px",strokeWidth:"2.5"}})}),e.jsxs("div",{className:"logo-container",children:[e.jsx("div",{className:"logo",children:e.jsx("span",{children:"WS"})}),e.jsx(f.Brand,{className:"navbar-brand mb-0",children:"Task Manager"})]})]}),e.jsxs("div",{className:"navbar-right",children:[e.jsx(k,{bg:"outline-primary",className:"me-2 d-none d-sm-block",children:"Employé"}),e.jsx(j,{variant:"link",onClick:d,className:"theme-toggle me-3",title:`Passer au thème ${s==="dark"?"clair":"sombre"}`,children:e.jsx("i",{"data-feather":s==="dark"?"sun":"moon"})}),e.jsxs(u,{align:"end",className:"user-dropdown",onToggle:t=>{t&&setTimeout(()=>v.replace(),0)},children:[e.jsxs(u.Toggle,{variant:"primary",id:"dropdown-user",className:"dropdown-toggle",children:[e.jsxs("div",{className:"user-avatar",children:[r?.profil_url?e.jsx("img",{src:r.profil_url,alt:r.first_name||"Employé",style:{width:"35px",height:"35px",borderRadius:"50%",objectFit:"cover",border:"2px solid rgba(255, 255, 255, 0.3)"},onError:t=>{t.target.style.display="none",t.target.nextElementSibling.style.display="flex"}}):null,e.jsx("div",{style:{display:r?.profil_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",fontSize:"0.75rem",fontWeight:"600"},children:l(r?.first_name)})]}),e.jsx("span",{className:"user-name d-none d-sm-inline",children:h(r?.first_name||"Employé")}),e.jsx("i",{"data-feather":"chevron-down",style:{width:"16px",height:"16px"}})]}),e.jsxs(u.Menu,{className:`dropdown-menu ${s==="dark"?"bg-dark border-secondary":""}`,children:[e.jsxs("div",{className:"px-3 py-2 border-bottom",children:[e.jsx("div",{className:"fw-semibold",children:r?.first_name||"Employé"}),e.jsx("div",{className:"text-muted small",children:r?.email||"employe@woopservice.com"}),e.jsx("div",{className:"text-primary small",children:"Employé"})]}),e.jsxs(u.Item,{as:y,to:"/employee/profile",className:`dropdown-item ${s==="dark"?"text-light":""}`,children:[e.jsx("i",{"data-feather":"user",className:"me-2",style:{width:"16px",height:"16px"}}),"Mon Profil"]}),e.jsx(u.Divider,{className:s==="dark"?"border-secondary":""}),e.jsxs(u.Item,{onClick:c,className:"dropdown-item text-danger",children:[e.jsx("i",{"data-feather":"log-out",className:"me-2",style:{width:"16px",height:"16px"}}),"Déconnexion"]})]})]})]})]})}function I({children:p}){const m=N(),{user:r,isAdmin:x}=E(),[s,o]=i.useState(!0),[d,c]=i.useState(window.innerWidth<992),[l,h]=i.useState("light");i.useEffect(()=>{v.replace()},[m.pathname,s,l]),i.useEffect(()=>{const a=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",a),document.documentElement.setAttribute("data-bs-theme",a),h(a)},[]),i.useEffect(()=>{const a=new MutationObserver(()=>{const b=document.documentElement.getAttribute("data-theme")||"light";h(b),document.documentElement.setAttribute("data-bs-theme",b)});return a.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>a.disconnect()},[]),i.useEffect(()=>{const a=()=>{const b=window.innerWidth<992;c(b),o(!b)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),i.useEffect(()=>{d&&s&&o(!1)},[m.pathname]);const g=()=>{o(a=>!a)},t=S,n=T;return e.jsxs("div",{className:"d-flex min-vh-100",children:[e.jsx(t,{toggleSidebar:g}),e.jsx(n,{user:r,collapsed:!s}),d&&s&&e.jsx("div",{className:"sidebar-overlay",onClick:()=>o(!1)}),e.jsx("div",{className:`flex-grow-1 main-content ${s?"":"expanded"}`,children:e.jsx("main",{className:"p-4",children:e.jsx("div",{className:"container-fluid py-3",children:e.jsx("div",{className:"py-4",children:e.jsx("div",{className:"py-4",children:p})})})})})]})}export{I as A};
